<ion-header>
  <ion-toolbar>
    <ion-title>
      Detalle: {{ product.producto  | lowercase}}
    </ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <span ion-text color="primary" showWhen="ios">Cancel</span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item>
    <ion-label>
      <h2><b>Producto</b></h2>
      <h3>{{ product.producto}}&nbsp;{{product.concentrado}}</h3>
    </ion-label>
  </ion-item>
  <ion-item>
    <ion-label>
      <h2><b>Cantidad Existente</b></h2>
      <h3>{{product.cantidad_a_la_venta}}</h3>
    </ion-label>
  </ion-item>
  <ion-item>
    <ion-label stacked>Precio Referencial</ion-label>
    <ion-select [(ngModel)]="referencialPrice" (ngModelChange)="selectPrice()">
      <ion-option value="precio_distribuidora">
        Precio distribuidora: <b>{{product.precio_distribuidora}}</b>
      </ion-option>
      <ion-option value="precio_farmacia">
        Precio Farmacia: <b>{{product.precio_farmacia}}
      </b></ion-option>
      <ion-option value="precio_instituciones">
        Precio Instituciones: <b>{{product.precio_instituciones}}</b>
      </ion-option>
    </ion-select>
  </ion-item>
  <ion-item>
    <ion-label stacked>Precio</ion-label>
    <ion-input type="number"
               name="price"
               [(ngModel)]="detail.price"
               (ngModelChange)="calculateTotal()"
               placeholder="Precio">
    </ion-input>
  </ion-item>

  <ion-item>
    <ion-label stacked>Cantidad</ion-label>
    <ion-input type="number"
               clearInput
               name="quantity"
               [(ngModel)]="detail.quantity"
               (ngModelChange)="calculateTotal()"
               placeholder="Cantidad">
    </ion-input>
  </ion-item>
  <ion-item>
    <ion-label>
      <h1><b>Total</b></h1>
      <h1><b>{{detail.total}}</b></h1>
    </ion-label>
  </ion-item>
  <div paddingfull>
    <button ion-button
            (click)="saveDetail()"
            [disabled]="!detail.price || !detail.quantity || !detail.total || detail.quantity < 1"
            block>
      Guardar Detalle
    </button>
  </div>
</ion-content>
